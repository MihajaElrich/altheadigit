<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>	
		<!-- Month filter -->
		<record id="dashboard_month_filter_view_search" model="ir.ui.view">
			<field name="name">dashboard.view.search</field>
			<field name="model">sale.order</field>
			<field name="arch" type="xml">
				<search>
					<filter string="This Month" name="month_filter" domain="[('date_order', '&gt;=', context_today().strftime('%Y-%m-01'))]"/>
				</search>
			</field>
		</record>

		<!-- Orders State Graph View -->
		<record id="view_orders_state_graph" model="ir.ui.view">
			<field name="name">Orders State</field>
			<field name="model">sale.order</field>
			<field name="arch" type="xml">
				<graph string="Orders State" type="pie">
					<field name="state"/>
					<field name="amount_total" type="measure"/>
				</graph>
			</field>
		</record>
		
		<!-- Customer Count Graph View -->
		<record id="view_customer_count_graph" model="ir.ui.view">
			<field name="name">Customer Count</field>
			<field name="model">res.users</field>
			<field name="arch" type="xml">
				<graph string="Customer Count">
					<field name="user_id"/>
					<field name="customer_count"/>
				</graph>
			</field>
		</record>
		
		<!-- Customer Activity Graph View -->
		<record id="view_customer_activity_graph" model="ir.ui.view">
			<field name="name">Customer Activity</field>
			<field name="model">sale.order</field>
			<field name="arch" type="xml">
				<graph string="Customer Activity">
					<field name="user_id"/>
					<field name="partner_id"/>
				</graph>
			</field>
		</record>
		
		<!-- Orders of the Month Graph View -->
		<record id="view_month_order_graph" model="ir.ui.view">
			<field name="name">Orders of the Month</field>
			<field name="model">sale.order</field>
			<field name="arch" type="xml">
				<graph string="Salesperson Dashboard" type="bar" stacked="0">
					<field name="user_id" type="col"/>
					<field name="user_id" type="row"/>
					<field name="amount_untaxed" type="measure"/>
					<field name="amount_total" type="measure"/>
				</graph>
			</field>
		</record>
		
		<!-- Turnover Evolution Graph View -->
		<record id="view_orders_evolution_graph" model="ir.ui.view">
			<field name="name">Turnover Evolution</field>
			<field name="model">sale.order</field>
			<field name="arch" type="xml">
				<graph string="Turnover Evolution" type="line">
					<field name="date_order"/>
					<field name="amount_total" type="measure"/>
				</graph>
			</field>
		</record>

		<!-- Action for Orders State Graph View -->
		<record id="action_orders_state_graph" model="ir.actions.act_window">
			<field name="name">Orders State</field>
			<field name="res_model">sale.order</field>
			<field name="view_mode">graph</field>
			<field name="view_id" ref="view_orders_state_graph"/>
			<!-- <field name="search_view_id" ref="dashboard_month_filter_view_search"/> -->
			<field name="context">{'search_default_month_filter' : 1}</field>
			<field name="domain">[('date_order', '&gt;=', context_today().strftime('%Y-%m-01'))]</field>
		</record>

		<!-- Action for Customer Count Graph View -->
		<record id="action_customer_count_graph" model="ir.actions.act_window">
			<field name="name">Customer Count</field>
			<field name="res_model">res.users</field>
			<field name="view_mode">graph</field>
			<field name="view_id" ref="sales_dashboard.view_customer_count_graph"/>
			<field name="domain">[]</field>
		</record>

		<!-- Action for Customer Activity Graph View -->
		<record id="action_customer_activity_graph" model="ir.actions.act_window">
			<field name="name">Customer Activity</field>
			<field name="res_model">sale.order</field>
			<field name="view_mode">graph</field>
			<field name="view_id" ref="sales_dashboard.view_customer_activity_graph"/>
			<field name="domain">[]</field>
		</record>

		<!-- Action for Orders of the Month Graph View -->
		<record id="action_month_orders_graph" model="ir.actions.act_window">
			<field name="name">Orders of the Month</field>
			<field name="res_model">sale.order</field>
			<field name="view_mode">graph</field>
			<field name="view_id" ref="view_month_order_graph"/>
			<!-- <field name="domain">[('date_order', 'ilike', context_today().strftime('%m-%Y'))]</field> -->
			<field name="domain">[('date_order', '&gt;=', context_today().strftime('%Y-%m-01'))]</field>
		</record>

		<!-- Action for Turnover Evolution Graph View -->
		<record id="action_order_evolution_graph" model="ir.actions.act_window">
			<field name="name">Turnover Evolution</field>
			<field name="res_model">sale.order</field>
			<field name="view_mode">graph</field>
			<field name="view_id" ref="view_orders_evolution_graph"/>
			<field name="domain">[('state', '=', 'sale')]</field>
		</record>

		<!-- Today Visit Planning View -->
		<record id="view_today_visit_plannig_calendar" model="ir.ui.view">
			<field name="name">Visit of the day</field>
			<field name="model">calendar.event</field>
			<field name="arch" type="xml">
				<tree string="Visit of the day">
					<field name="name"/>
					<field name="start"/>
					<field name="stop"/>
					<field name="partner_ids" widget="many2many_tags"/>
				</tree>
			</field>
		</record>

		<!-- Action for Today Visit Planning -->
		<record id="action_today_visit_planning" model="ir.actions.act_window">
			<field name="name">Visit of the day</field>
			<field name="res_model">calendar.event</field>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_today_visit_plannig_calendar"/>
			<field name="domain">[('start', '&gt;=', context_today().strftime('%Y-%m-%d 00:00:00')), ('start', '&lt;=', context_today().strftime('%Y-%m-%d 23:59:59'))]</field>
		</record>

		<!-- Dashboard view -->
		<record model="ir.ui.view" id="sales_dashboard_view">
			<field name="name">Dashboard</field>
			<field name="model">board.board</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Dashboard">
					<!-- <board style="1-2">
						<column></column>
						<column>
							<action name="%(sales_dashboard.action_customer_count_graph)d" string="Customer Count"/>
						</column>
					</board> -->
					<board style="1">
						<column>
							<action name="%(sales_dashboard.action_today_visit_planning)d" string="Visit of the day"/>
						</column>
					</board>
					<board style="1-2">
						<column>
							<action name="%(sales_dashboard.action_orders_state_graph)d" string="Orders State"/>
						</column>
						<column>
							<action name="%(sales_dashboard.action_customer_activity_graph)d" string="Customer Activity"/>
						</column>
					</board>
					<board style="1-2">
						<column>
							<action name="%(sales_dashboard.action_order_evolution_graph)d" string="Turnover Evolution"/>
						</column>
						<column>
							<action name="%(sales_dashboard.action_month_orders_graph)d" string="Orders of The Month"/>
						</column>
					</board>
				</form>
			</field>
		</record>

		<!-- Action to open the dashboard -->
		<record model="ir.actions.act_window" id="open_dashboard_action">
			<field name="name">Dashboard</field>
			<field name="res_model">board.board</field>
			<field name="view_mode">form</field>
			<field name="usage">menu</field>
			<field name="view_id" ref="sales_dashboard_view"/>
			<!-- <field name="search_view_id" ref="dashboard_month_filter_view_search"/> -->
		</record>
	</data>

	<menuitem name="Dashboard" id="sales_dashboard_menu" parent="sale.sale_menu_root" sequence="2" action="open_dashboard_action"/>
	<!-- <menuitem name="Orders State" id="orders_state_dashboard_menu" parent="sale.sale_menu_root" action="action_orders_state_graph"/> -->
	<!-- <menuitem name="Orders of the Month" id="month_orders_dashboard_menu" parent="sales_dashboard_menu" action="action_month_orders_graph"/> -->
	<!-- <menuitem name="Salesperson" id="customer_activity_menu" parent="sales_dashboard_menu" action="action_customer_activity_graph"/> -->
</odoo>